<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Èü≥Ê•Ω„Çµ„Ç§„Éà</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #1e1e1e;
            color: white;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin: 20px;
            color: #ffcc00;
        }
        .player-container {
            margin: 40px auto;
            max-width: 600px;
            background-color: #333;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .playlist {
            margin: 20px 0;
        }
        .playlist button {
            background-color: #444;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .playlist button:hover {
            background-color: #555;
        }
        audio {
            width: 100%;
            margin-top: 20px;
        }
        .controls {
            margin-top: 20px;
        }
        .controls button {
            background-color: #ffcc00;
            color: #1e1e1e;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 18px;
        }
        .controls button:hover {
            background-color: #ffaa00;
        }
        .volume-control {
            margin-top: 20px;
        }
        .volume-control input[type="range"] {
            width: 80%;
        }
        .visualizer {
            margin-top: 20px;
            width: 100%;
            height: 100px;
            background: black;
            border-radius: 5px;
        }
        @media (max-width: 768px) {
            .player-container {
                width: 90%;
            }
        }
    </style>
</head>
<body>

<h1>Èü≥Ê•Ω„Çµ„Ç§„Éà</h1>

<div class="player-container">
    <div class="playlist">
        <button onclick="playSong(0)">üéµ Êõ≤1: ÂøÉÂú∞„Çà„ÅÑ„É°„É≠„Éá„Ç£</button>
        <button onclick="playSong(1)">üéµ Êõ≤2: „Ç∏„É£„Ç∫„Çª„ÉÉ„Ç∑„Éß„É≥</button>
        <button onclick="playSong(2)">üéµ Êõ≤3: „Ç®„É¨„ÇØ„Éà„É≠„Éì„Éº„Éà</button>
    </div>
    <audio id="audioPlayer" controls>
        <source id="audioSource" src="" type="audio/mpeg">
        „Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØ„Ç™„Éº„Éá„Ç£„Ç™„Çø„Ç∞„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
    </audio>
    <div class="controls">
        <button onclick="pauseAudio()">‚è∏Ô∏è ‰∏ÄÊôÇÂÅúÊ≠¢</button>
        <button onclick="resumeAudio()">‚ñ∂Ô∏è ÂÜçÁîü</button>
        <button onclick="stopAudio()">‚èπÔ∏è ÂÅúÊ≠¢</button>
    </div>
    <div class="volume-control">
        <label for="volume">Èü≥ÈáèË™øÊï¥: </label>
        <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5" onchange="adjustVolume()">
    </div>
    <div id="visualizer" class="visualizer"></div>
</div>

<script>
    const audioPlayer = document.getElementById("audioPlayer");
    const audioSource = document.getElementById("audioSource");
    const visualizer = document.getElementById("visualizer");
    const volumeSlider = document.getElementById("volume");

    const playlist = [
        { title: "ÂøÉÂú∞„Çà„ÅÑ„É°„É≠„Éá„Ç£", file: "song1.mp3" },
        { title: "„Ç∏„É£„Ç∫„Çª„ÉÉ„Ç∑„Éß„É≥", file: "song2.mp3" },
        { title: "„Ç®„É¨„ÇØ„Éà„É≠„Éì„Éº„Éà", file: "song3.mp3" }
    ];

    let currentIndex = 0;

    function playSong(index) {
        currentIndex = index;
        audioSource.src = playlist[index].file;
        audioPlayer.load();
        audioPlayer.play();
    }

    function pauseAudio() {
        audioPlayer.pause();
    }

    function resumeAudio() {
        audioPlayer.play();
    }

    function stopAudio() {
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
    }

    function adjustVolume() {
        audioPlayer.volume = volumeSlider.value;
    }

    // „Éì„Ç∏„É•„Ç¢„É©„Ç§„Ç∂„Éº„ÅÆË®≠ÂÆö
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const analyser = audioContext.createAnalyser();
    const dataArray = new Uint8Array(analyser.frequencyBinCount);
    const sourceNode = audioContext.createMediaElementSource(audioPlayer);

    sourceNode.connect(analyser);
    analyser.connect(audioContext.destination);

    function drawVisualizer() {
        const canvas = visualizer.getContext('2d');
        analyser.getByteFrequencyData(dataArray);

        canvas.fillStyle = 'black';
        canvas.fillRect(0, 0, visualizer.width, visualizer.height);

        const barWidth = (visualizer.width / dataArray.length) * 2.5;
        let barHeight;
        let x = 0;

        for (let i = 0; i < dataArray.length; i++) {
            barHeight = dataArray[i];
            canvas.fillStyle = `rgb(${barHeight + 100}, 50, 50)`;
            canvas.fillRect(x, visualizer.height - barHeight / 2, barWidth, barHeight / 2);
            x += barWidth + 1;
        }

        requestAnimationFrame(drawVisualizer);
    }

    visualizer.width = 600;
    visualizer.height = 100;
    drawVisualizer();
</script>

</body>
</html>

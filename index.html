<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>3Dé¢¨ãƒã‚¤ã‚¯ãƒ©ç½°ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
<style>
  body {
    font-family: 'Arial', sans-serif;
    background: #0b0c10;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: hidden;
    perspective: 1000px;
  }
  h1 {
    font-size: 2em;
    margin-bottom: 20px;
    text-shadow: 0 0 10px #fff;
  }
  #roulette-container {
    position: relative;
    width: 400px;
    height: 400px;
    transform-style: preserve-3d;
  }
  .roulette-item {
    position: absolute;
    left: 50%;
    top: 50%;
    transform-origin: 0 0 150px;
    font-size: 1.5em;
    white-space: nowrap;
    text-align: center;
    transform: rotateY(0deg) translateZ(150px);
    transition: transform 0.1s ease;
  }
  #result {
    margin-top: 30px;
    font-size: 2em;
    padding: 20px 40px;
    background: linear-gradient(135deg, #21a1f1, #61dafb);
    border-radius: 20px;
    text-align: center;
    min-width: 350px;
    box-shadow: 0 0 20px #61dafb;
    display: none;
  }
  button {
    margin-top: 20px;
    padding: 15px 40px;
    font-size: 1.2em;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    background: #61dafb;
    color: #000;
  }
  button:hover { background: #21a1f1; }

  .firework {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    pointer-events: none;
    animation: fly 1s forwards;
  }
  @keyframes fly {
    0% { transform: translate(0,0) scale(1); opacity: 1; }
    100% { transform: translate(var(--x), var(--y)) scale(2); opacity: 0; }
  }
</style>
</head>
<body>
<h1>3Dé¢¨ãƒã‚¤ã‚¯ãƒ©ç½°ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆğŸ†</h1>
<div id="roulette-container"></div>
<div id="result"></div>
<button onclick="spinRoulette()">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™</button>
<audio id="tickSound" src="https://freesound.org/data/previews/341/341695_3248244-lq.mp3"></audio>

<script>
const punishments = [
  "æº¶å²©ã«é£›ã³è¾¼ã‚€ğŸ”¥",
  "ãƒ€ã‚¤ãƒ¤ã‚’å…¨éƒ¨æ¨ã¦ã‚‹ğŸ’",
  "æœ¨ã®å‰£ã§ã‚¦ã‚£ã‚¶ãƒ¼ã¨æˆ¦ãˆğŸŒ²",
  "æ‘ã‚’è¦‹ã¤ã‘ã‚‹ã¾ã§ä½•ã‚‚ã—ã¦ã¯ã„ã‘ãªã„",
  "ç­‹ãƒˆãƒ¬ï¼‘åˆ†",
  "è‚‰ã‚’å…¨éƒ¨é›†ã‚ã‚",
  "ãƒã‚¶ãƒ¼ãƒãƒ¼ã‚¿ãƒ«ã«é£›ã³è¾¼ã‚ğŸ”¥",
  "è£…å‚™ã‚’å…¨éƒ¨ã™ã¦ã‚",
  "é£Ÿæ–™ã‚’å…¨éƒ¨æŠ•ã’æ¨ã¦ã‚ğŸ–",
  "æ•µãƒ¢ãƒ–10ä½“å€’ã™ã¾ã§å¸°ã‚Œãªã„ğŸ‘¾",
  "ãƒ”ãƒ³ã‚¯ã®ç¾Šæ¯›ã‚’ä½œã‚Œ",
  "ãƒ€ã‚¤ãƒ¤è£…å‚™ä½•ã‹ï¼‘ã¤ï¼ˆãƒ„ãƒ¼ãƒ«ã¯ãªã—ï¼‰",
  "ãƒªãƒ³ã‚´ï¼‘ï¼å€‹é›†ã‚ã‚‹",
  "å®¶ã‚’å»ºã¦ã‚‹",
  "å¼“çŸ¢ã‚’ä½œã‚‹",
  "å®¶ã®å‘¨ã‚Šã‚’èµ°ã‚‹ï¼ˆç‰©ç†ï¼‰",
  "ï¼‘ï½‹ï½èµ°ã‚‹"
];

const container = document.getElementById("roulette-container");
const resultDiv = document.getElementById("result");
const tick = document.getElementById("tickSound");

// æ–‡å­—ã‚’å††å½¢ã«é…ç½®
punishments.forEach((text, i) => {
  const div = document.createElement("div");
  div.className = "roulette-item";
  div.textContent = text;
  div.style.transform = `rotateY(${(360/punishments.length)*i}deg) translateZ(150px)`;
  container.appendChild(div);
});

let rotation = 0;

function createFirework(x, y) {
  for(let i=0;i<30;i++){
    const fw = document.createElement('div');
    fw.className = 'firework';
    fw.style.left = x + 'px';
    fw.style.top = y + 'px';
    const angle = Math.random() * 2 * Math.PI;
    const distance = Math.random() * 150;
    fw.style.setProperty('--x', Math.cos(angle) * distance + 'px');
    fw.style.setProperty('--y', Math.sin(angle) * distance + 'px');
    fw.style.background = `hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(fw);
    setTimeout(() => fw.remove(), 1000);
  }
}

function spinRoulette() {
  let spins = Math.floor(Math.random() * 10 + 30);
  let delay = 50;
  let count = 0;
  resultDiv.style.display = "none";

  const interval = setInterval(() => {
    rotation += 15 + Math.random() * 10;
    container.style.transform = `rotateY(${rotation}deg)`;

    tick.currentTime = 0;
    tick.play().catch(()=>{});

    count++;
    delay += 5;

    if(count >= spins){
      clearInterval(interval);

      // åœæ­¢ä½ç½®ã®è¨ˆç®—
      const index = Math.floor((rotation % 360) / (360 / punishments.length));
      const finalIndex = (punishments.length - index) % punishments.length;

      // çµæœã‚’å¤§ããè¡¨ç¤º
      resultDiv.textContent = punishments[finalIndex];
      resultDiv.style.display = "block";

      // èŠ±ç«æ¼”å‡º
      const rect = resultDiv.getBoundingClientRect();
      createFirework(rect.left + rect.width/2, rect.top + rect.height/2);
    }
  }, delay);
}
</script>
</body>
</html>
